<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Регистрация</title>
    <style>
        /* Общие стили для всей страницы */
        body {
            font-family: Arial, sans-serif; /* Шрифт */
            background-color: #f4f6f8;      /* Цвет фона */
            display: flex;                  /* Включаем flexbox */
            justify-content: center;        /* Центрируем по горизонтали */
            align-items: center;            /* Центрируем по вертикали */
            height: 100vh;                  /* Высота = весь экран */
            margin: 0;                      /* Убираем отступы браузера */
        }

        /* Контейнер формы */
        .form-container {
            background: #fff;                /* Белый фон */
            padding: 30px;                   /* Внутренние отступы */
            border-radius: 8px;              /* Скруглённые углы */
            box-shadow: 0 4px 12px rgba(0,0,0,0.1); /* Тень */
            width: 300px;                    /* Ширина блока */
            text-align: center;              /* Текст по центру */
        }

        /* Заголовок формы */
        .form-container h2 {
            margin-bottom: 20px;             /* Отступ снизу */
        }

        /* Поля ввода */
        .form-container input {
            width: 100%;                     /* Растягиваем на всю ширину контейнера */
            padding: 10px;                   /* Внутренний отступ */
            margin: 8px 0;                   /* Отступ сверху/снизу */
            border: 1px solid #ccc;          /* Серый бордер */
            border-radius: 4px;              /* Скруглённые углы */
        }

        /* Контейнер для кнопок */
        .button-row {
            display: flex;                   /* Кнопки в ряд */
            justify-content: space-between;  /* Раздвигаем их по краям */
            margin-top: 20px;                /* Отступ сверху */
        }

        /* Стили кнопок */
        .button-row button {
            flex: 1;                         /* Каждая кнопка занимает равное место */
            margin: 0 5px;                   /* Отступы между кнопками */
            padding: 10px;                   /* Внутренний отступ */
            border: none;                    /* Без рамки */
            border-radius: 4px;              /* Скруглённые углы */
            background: #007bff;             /* Синий фон */
            color: white;                    /* Белый текст */
            cursor: pointer;                 /* Курсор "рука" */
            transition: background 0.3s;     /* Плавное изменение цвета при наведении */
        }

        /* Эффект при наведении */
        .button-row button:hover {
            background: #0056b3;             /* Более тёмный синий */
        }
        /* Стили для label */ 
        .form-container label {
            display: block; /* каждая метка занимает всю строку */ 
            text-align: left; /* выравнивание по левому краю */ 
            font-size: 0.8em; /* немного меньше шрифт */ 
            margin-top: 5px; /* отступ сверху */ 
            /* margin-bottom: 3px; небольшой отступ снизу  */
            color: #333; /* тёмно-серый цвет */
            padding-left: 7px; /* небольшой отступ слева */
         }
        .err { 
            color: red; 
            font-size: 0.9em; 
            margin-bottom: 10px; 
        }
    </style>
</head>
<body>
    <div class="form-container">
        <h2>Регистрация</h2>
        <!-- выводим сообщение об ошибке --> 
        {% if err %} 
            <p class="err">{{ err }}</p> 
        {% endif %}

        <form method="POST">
            <!-- Имя: только русские буквы -->
            <label for="first_name">Имя</label>
            <input type="text" name="first_name" placeholder="Имя" 
                   pattern="^[А-Яа-яЁё]+$" required 
                   title="Имя должно содержать только русские буквы"
                   value="{{first_name}}">
   
            <!-- Фамилия: только русские буквы -->
            <label for="last_name"> Фамилия </label>
            <input type="text" name="last_name" placeholder="Фамилия" 
                   pattern="^[А-Яа-яЁё]+$" required 
                   title="Фамилия должна содержать только русские буквы"
                   value="{{last_name}}">

            <!-- Возраст: от 12 до 100 -->
            <label for="age">Возраст</label>
            <input type="number" name="age" placeholder="Возраст" 
                   min="12" max="100" required 
                   title="Возраст должен быть от 12 до 100"
                   value="{{age}}">

            <!-- Email: встроенная проверка -->
            <label for="email">Email</label>
            <input type="email" name="email" placeholder="Email" required value="{{email}}">

            <!-- Логин: латиница, цифры и _, длина 6-20 -->
            <label for="username">Логин</label>
            <input type="text" name="username" placeholder="Логин" 
                   pattern="^[A-Za-z0-9_]{6,20}$" required 
                   title="Логин: латинские буквы, цифры и _, от 6 до 20 символов">

            <!-- Пароль: хотя бы 1 строчная, 1 заглавная, 1 цифра, длина 8-15 -->
            <label for="password">Пароль</label>
            <input type="password" name="password" placeholder="Пароль" 
                   pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])[A-Za-z0-9]{8,15}$" required 
                   title="Пароль: 1 строчная, 1 заглавная, 1 цифра, длина 8-15">

            <div class="button-row">
                <button type="submit" name="action" value="register">Регистрация</button>
                <button type="submit" name="action" value="login" formnovalidate>Вход</button>
            </div>
        </form>
    </div>
</body>
</html>
